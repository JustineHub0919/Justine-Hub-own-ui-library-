-- KazeUI (refined)
-- Window System (PC + Mobile)
-- Improvements: optimized tweens, fixed bottom-left rounding (masked left panel),
-- removed duplicate drag binding, safer FormatImage, cleaned up returns.
-- Modified (2026-01-11 by assistant): simplified Section:AddLabel to only create a TextLabel,
-- removed other label elements (topbar Title/SubLabel and tab text labels).
-- CSS provided by user appended at bottom as a comment for button styling reference.

local KazeUI = {}
KazeUI.__index = KazeUI

--// Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService") -- required for drag InputChanged
local LP = Players.LocalPlayer

--// Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KazeUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = LP:WaitForChild("PlayerGui")

--// UIScale for consistent scaling across devices
local UIScale = Instance.new("UIScale")
UIScale.Parent = ScreenGui

local function UpdateScale()
	local size = workspace.CurrentCamera.ViewportSize
	if size.X < 600 then
		UIScale.Scale = math.clamp(size.X / 800, 0.5, 1)
	else
		UIScale.Scale = math.clamp(size.X / 1920, 0.6, 1)
	end
end
UpdateScale()
workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(UpdateScale)

--// Texture ID Sanitizer (safer)
local function FormatImage(id)
	if not id then return "" end
	local s = tostring(id)
	local clean = string.gsub(s, "%D", "") -- keep only digits
	if clean == "" then return "" end
	return "rbxassetid://" .. clean
end

--// Drag Function (works with Mouse and Touch) - slightly optimized
local function MakeDraggable(dragPart, targetPart)
	local dragging, dragInput, dragStart, startPos = false, nil, nil, nil

	local function update(input)
		if not dragStart or not startPos then return end
		local delta = input.Position - dragStart
		targetPart.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end

	dragPart.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = targetPart.Position
			-- watch for end
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
					dragInput = nil
				end
			end)
		end
	end)

	dragPart.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)

	UIS.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			update(input)
		end
	end)
end

-- Helper to make an infinite ping-pong neon tween on a UIStroke or Color3 property
local function PlayNeonPulse(instance, property, duration)
	if not instance then return end
	local ti = TweenInfo.new(duration or 1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true)
	local defaultColor = instance[property]
	local altColor = Color3.fromRGB(0, 255, 255)
	local goal = {}
	goal[property] = altColor
	local tw = TweenService:Create(instance, ti, goal)
	tw:Play()
	return tw
end

--// CREATE WINDOW
function KazeUI:CreateWindow(config)
	config = config or {}

	-- Main Config
	local Title = config.Title or "Kaze UI"
	local Author = config.Author or "Unknown"
	local Version = config.Version or "1.0"
	local MainIcon = FormatImage(config.Icon or "6031763447")

	-- Open Button Config
	local OpenIcon = FormatImage((config.OpenButton and config.OpenButton.Icon) or config.Icon or "6031763447")
	local MiniButtonSize = UDim2.fromOffset(60, 60)

	-- Colors & radii
	local BG = Color3.fromRGB(20, 20, 25)
	local TopBarBG = Color3.fromRGB(15, 15, 20)
	local Accent = Color3.fromRGB(0, 160, 255)
	local CornerRadius = UDim.new(0, 14)

	--// Main Window
	local Window = Instance.new("Frame")
	Window.Name = "MainWindow"
	Window.Size = UDim2.fromOffset(650, 420)
	Window.Position = UDim2.fromScale(0.5, 0.5)
	Window.AnchorPoint = Vector2.new(0.5, 0.5)
	Window.BackgroundColor3 = BG
	Window.BorderSizePixel = 0
	Window.Parent = ScreenGui
	Window.ClipsDescendants = true
	local windowCorner = Instance.new("UICorner", Window)
	windowCorner.CornerRadius = CornerRadius

	local WindowStroke = Instance.new("UIStroke")
	WindowStroke.Color = Accent
	WindowStroke.Thickness = 2.5
	WindowStroke.Parent = Window
	PlayNeonPulse(WindowStroke, "Color", 1.6)

	-- Top Bar
	local TopBar = Instance.new("Frame")
	TopBar.Name = "TopBar"
	TopBar.Size = UDim2.new(1, 0, 0, 56)
	TopBar.BackgroundColor3 = TopBarBG
	TopBar.BorderSizePixel = 0
	TopBar.Parent = Window
	local topCorner = Instance.new("UICorner", TopBar)
	topCorner.CornerRadius = CornerRadius -- keep same curvature

	MakeDraggable(TopBar, Window)

	local Icon = Instance.new("ImageLabel")
	Icon.Size = UDim2.fromOffset(32, 32)
	Icon.Position = UDim2.fromOffset(14, 12)
	Icon.BackgroundTransparency = 1
	Icon.Image = MainIcon
	Icon.Parent = TopBar
	Instance.new("UICorner", Icon).CornerRadius = UDim.new(1, 0)

	-- NOTE: TitleLabel and SubLabel removed per request; Section labels will be used instead.

	local Minimize = Instance.new("TextButton")
	Minimize.Size = UDim2.fromOffset(36, 36)
	Minimize.Position = UDim2.new(1, -88, 0.5, -18)
	Minimize.Text = "—"
	Minimize.Font = Enum.Font.GothamBold
	Minimize.TextSize = 20
	Minimize.TextColor3 = Color3.fromRGB(220, 220, 220)
	Minimize.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	Minimize.Parent = TopBar
	Instance.new("UICorner", Minimize).CornerRadius = UDim.new(1, 0)

	local Close = Instance.new("TextButton")
	Close.Size = UDim2.fromOffset(36, 36)
	Close.Position = UDim2.new(1, -44, 0.5, -18)
	Close.Text = "✕"
	Close.Font = Enum.Font.GothamBold
	Close.TextSize = 18
	Close.TextColor3 = Color3.fromRGB(255, 90, 90)
	Close.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
	Close.Parent = TopBar
	Instance.new("UICorner", Close).CornerRadius = UDim.new(1, 0)

	local Content = Instance.new("Frame")
	Content.Position = UDim2.fromOffset(0, 56)
	Content.Size = UDim2.new(1, 0, 1, -56)
	Content.BackgroundTransparency = 1
	Content.Parent = Window

	--// MINI BUTTON (60x60)
	local MiniButton = Instance.new("ImageButton")
	MiniButton.Name = "MiniButton"
	MiniButton.Size = MiniButtonSize
	MiniButton.Position = UDim2.fromScale(0.1, 0.1)
	MiniButton.BackgroundColor3 = BG
	MiniButton.BorderSizePixel = 0
	MiniButton.Visible = false
	MiniButton.Parent = ScreenGui
	MiniButton.ZIndex = 999
	MiniButton.ScaleType = Enum.ScaleType.Slice
	MiniButton.SliceCenter = Rect.new(4,4,60,60)
	Instance.new("UICorner", MiniButton).CornerRadius = UDim.new(0, 12)

	local miniPadding = Instance.new("UIPadding")
	miniPadding.PaddingTop = UDim.new(0, 4)
	miniPadding.PaddingBottom = UDim.new(0, 4)
	miniPadding.PaddingLeft = UDim.new(0, 4)
	miniPadding.PaddingRight = UDim.new(0, 4)
	miniPadding.Parent = MiniButton

	local MiniIcon = Instance.new("ImageLabel")
	MiniIcon.Size = UDim2.fromScale(1, 1)
	MiniIcon.Position = UDim2.fromScale(0.5, 0.5)
	MiniIcon.AnchorPoint = Vector2.new(0.5, 0.5)
	MiniIcon.BackgroundTransparency = 1
	MiniIcon.Image = OpenIcon
	MiniIcon.Parent = MiniButton
	MiniIcon.ZIndex = 1000

	local MiniStroke = Instance.new("UIStroke")
	MiniStroke.Color = Accent
	MiniStroke.Thickness = 2.5
	MiniStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	MiniStroke.Parent = MiniButton
	MiniStroke.LineJoinMode = Enum.LineJoinMode.Bevel
	PlayNeonPulse(MiniStroke, "Color", 1.6)

	MakeDraggable(MiniButton, MiniButton) -- draggable mini button

	Minimize.MouseButton1Click:Connect(function()
		Window.Visible = false
		MiniButton.Visible = true
		MiniButton.Size = UDim2.fromOffset(0, 0)
		TweenService:Create(MiniButton, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Size = MiniButtonSize}):Play()
	end)

	MiniButton.MouseButton1Click:Connect(function()
		MiniButton.Visible = false
		Window.Visible = true
		Window.Size = UDim2.fromOffset(0, 0)
		TweenService:Create(Window, TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Size = UDim2.fromOffset(650, 420)}):Play()
	end)

	-- Close confirmation
	local function ShowCloseConfirm()
		Minimize.Active = false
		Close.Active = false
		local Overlay = Instance.new("Frame")
		Overlay.Size = UDim2.new(1, 0, 1, 0)
		Overlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
		Overlay.BackgroundTransparency = 0.6
		Overlay.ZIndex = 20
		Overlay.Parent = Window

		local ConfirmWindow = Instance.new("Frame")
		ConfirmWindow.Size = UDim2.fromOffset(350, 150)
		ConfirmWindow.AnchorPoint = Vector2.new(0.5, 0.5)
		ConfirmWindow.Position = UDim2.fromScale(0.5, 0.5)
		ConfirmWindow.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
		ConfirmWindow.ZIndex = 21
		ConfirmWindow.Parent = Overlay
		Instance.new("UICorner", ConfirmWindow).CornerRadius = UDim.new(0, 12)

		local ConfirmText = Instance.new("TextLabel")
		ConfirmText.Size = UDim2.new(1, -32, 0, 48)
		ConfirmText.Position = UDim2.fromOffset(16, 20)
		ConfirmText.BackgroundTransparency = 1
		ConfirmText.Text = "Are you sure you want to close the UI?"
		ConfirmText.TextColor3 = Color3.fromRGB(230, 230, 230)
		ConfirmText.Font = Enum.Font.GothamBold
		ConfirmText.TextSize = 18
		ConfirmText.TextWrapped = true
		ConfirmText.ZIndex = 22
		ConfirmText.Parent = ConfirmWindow

		local ButtonsFrame = Instance.new("Frame")
		ButtonsFrame.Size = UDim2.new(1, 0, 0, 40)
		ButtonsFrame.Position = UDim2.new(0, 0, 1, -20)
		ButtonsFrame.AnchorPoint = Vector2.new(0, 1)
		ButtonsFrame.BackgroundTransparency = 1
		ButtonsFrame.ZIndex = 22
		ButtonsFrame.Parent = ConfirmWindow

		local layout = Instance.new("UIListLayout")
		layout.Parent = ButtonsFrame
		layout.FillDirection = Enum.FillDirection.Horizontal
		layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
		layout.Padding = UDim.new(0, 16)

		local ConfirmBtn = Instance.new("TextButton")
		ConfirmBtn.Size = UDim2.new(0, 120, 0, 36)
		ConfirmBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
		ConfirmBtn.Text = "Confirm"
		ConfirmBtn.TextColor3 = Color3.fromRGB(230, 230, 230)
		ConfirmBtn.Font = Enum.Font.GothamBold
		ConfirmBtn.TextSize = 16
		ConfirmBtn.ZIndex = 23
		ConfirmBtn.Parent = ButtonsFrame
		Instance.new("UICorner", ConfirmBtn).CornerRadius = UDim.new(0, 8)

		local CancelBtn = Instance.new("TextButton")
		CancelBtn.Size = UDim2.new(0, 120, 0, 36)
		CancelBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
		CancelBtn.Text = "Cancel"
		CancelBtn.TextColor3 = Color3.fromRGB(220, 220, 220)
		CancelBtn.Font = Enum.Font.GothamBold
		CancelBtn.TextSize = 16
		CancelBtn.ZIndex = 23
		CancelBtn.Parent = ButtonsFrame
		Instance.new("UICorner", CancelBtn).CornerRadius = UDim.new(0, 8)

		ConfirmBtn.MouseButton1Click:Connect(function()
			ScreenGui:Destroy()
		end)
		CancelBtn.MouseButton1Click:Connect(function()
			Overlay:Destroy()
			Minimize.Active = true
			Close.Active = true
		end)
	end
	Close.MouseButton1Click:Connect(ShowCloseConfirm)

	--// TABS (Left Side) - improved: add masked outer frame to preserve rounding while avoiding stroke clipping
	local TAB_WIDTH = 140

	-- Left mask/frame to get rounded bottom-left while avoiding stroke clipping
	local LeftMask = Instance.new("Frame")
	LeftMask.Name = "LeftMask"
	LeftMask.Size = UDim2.new(0, TAB_WIDTH, 1, 0)
	LeftMask.Position = UDim2.new(0, 0, 0, 0)
	LeftMask.BackgroundTransparency = 1
	LeftMask.Parent = Content

	-- Outer visible left panel (with UICorner)
	local LeftPanel = Instance.new("Frame")
	LeftPanel.Name = "LeftPanel"
	LeftPanel.Size = UDim2.new(1, 0, 1, 0)
	LeftPanel.Position = UDim2.new(0, 0, 0, 0)
	LeftPanel.BackgroundColor3 = Color3.fromRGB(16, 16, 20)
	LeftPanel.BorderSizePixel = 0
	LeftPanel.Parent = LeftMask
	local leftCorner = Instance.new("UICorner", LeftPanel)
	leftCorner.CornerRadius = UDim.new(0, 12) -- slightly smaller corner for left side

	-- Inner area for tabs (so strokes can be drawn on LeftPanel without being clipped by corner)
	local TabsContainer = Instance.new("Frame")
	TabsContainer.Name = "TabsContainer"
	TabsContainer.Size = UDim2.new(1, 0, 1, 0)
	TabsContainer.Position = UDim2.new(0, 0, 0, 0)
	TabsContainer.BackgroundTransparency = 1
	TabsContainer.BorderSizePixel = 0
	TabsContainer.Parent = LeftPanel

	local TabsScroll = Instance.new("ScrollingFrame")
	TabsScroll.Size = UDim2.new(1, 0, 1, 0)
	TabsScroll.BackgroundTransparency = 1
	TabsScroll.ScrollBarThickness = 6
	TabsScroll.VerticalScrollBarInset = Enum.VerticalScrollBarInset.ScrollBar
	TabsScroll.Parent = TabsContainer
	TabsScroll.BorderSizePixel = 0
	TabsScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
	TabsScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y

	local tabsLayout = Instance.new("UIListLayout")
	tabsLayout.Parent = TabsScroll
	tabsLayout.SortOrder = Enum.SortOrder.LayoutOrder
	tabsLayout.Padding = UDim.new(0, 10) -- slightly larger spacing

	local function updateTabsCanvas()
		local totalY = tabsLayout.AbsoluteContentSize.Y
		TabsScroll.CanvasSize = UDim2.new(0, 0, 0, totalY + 12)
	end
	tabsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateTabsCanvas)

	-- Vertical neon divider (tuned)
	local DividerGlow = Instance.new("Frame")
	DividerGlow.Name = "DividerGlow"
	DividerGlow.Size = UDim2.new(0, 8, 1, -12)
	DividerGlow.Position = UDim2.new(0, TAB_WIDTH - 3, 0, 6)
	DividerGlow.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
	DividerGlow.BackgroundTransparency = 0.92
	DividerGlow.ZIndex = 5
	DividerGlow.Parent = Content
	Instance.new("UICorner", DividerGlow).CornerRadius = UDim.new(0, 4)

	local Divider = Instance.new("Frame")
	Divider.Name = "Divider"
	Divider.Size = UDim2.new(0, 2, 1, -12)
	Divider.Position = UDim2.new(0, TAB_WIDTH, 0, 6)
	Divider.BackgroundColor3 = Accent
	Divider.BorderSizePixel = 0
	Divider.ZIndex = 6
	Divider.Parent = Content

	local DividerStroke = Instance.new("UIStroke")
	DividerStroke.Thickness = 2.5
	DividerStroke.Color = Accent
	DividerStroke.Parent = Divider
	DividerStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	PlayNeonPulse(DividerStroke, "Color", 1.6)

	-- Pages container
	local Pages = Instance.new("Frame")
	Pages.Name = "Pages"
	Pages.Size = UDim2.new(1, -TAB_WIDTH, 1, 0)
	Pages.Position = UDim2.new(0, TAB_WIDTH, 0, 0)
	Pages.BackgroundTransparency = 1
	Pages.Parent = Content

	-- Keep track of tabs and pages
	local tabs = {}
	local pages = {}
	local activeIndex = nil

	-- Style helper for tab button (holder -> glow -> inner button)
	local function makeTabButton(name, iconImage, order)
		local holder = Instance.new("Frame")
		holder.Size = UDim2.new(1, -16, 0, 48)
		holder.LayoutOrder = order or 1
		holder.BackgroundTransparency = 1
		holder.Parent = TabsScroll
		holder.ZIndex = 6

		-- faint glow inside holder
		local glow = Instance.new("Frame")
		glow.Size = UDim2.new(1, 0, 1, 0)
		glow.Position = UDim2.new(0, 0, 0, 0)
		glow.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
		glow.BackgroundTransparency = 0.92
		glow.ZIndex = 5
		local glowCorner = Instance.new("UICorner", glow)
		glowCorner.CornerRadius = UDim.new(0, 6)
		glow.Parent = holder

		-- outer stroke (drawn on holder so it doesn't get clipped by inner UICorner)
		local holderCorner = Instance.new("UICorner", holder)
		holderCorner.CornerRadius = UDim.new(0, 6)
		local holderStroke = Instance.new("UIStroke")
		holderStroke.Thickness = 2
		holderStroke.Color = Accent
		holderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
		holderStroke.Parent = holder

		-- inner button inset so outer stroke + glow are visible
		local btn = Instance.new("TextButton")
		btn.Size = UDim2.new(1, -8, 1, -8)
		btn.Position = UDim2.new(0, 4, 0, 4)
		btn.BackgroundColor3 = BG
		btn.BorderSizePixel = 0
		btn.AutoButtonColor = false
		btn.Text = ""
		btn.Parent = holder
		btn.ZIndex = 7
		local btnCorner = Instance.new("UICorner", btn)
		btnCorner.CornerRadius = UDim.new(0, 5)

		-- icon inside button (centered since label removed)
		local icon = Instance.new("ImageLabel")
		icon.Size = UDim2.fromOffset(32, 32)
		icon.Position = UDim2.new(0, 8, 0.5, -16) -- left aligned but text removed; keep unchanged for layout
		icon.BackgroundTransparency = 1
		icon.Image = FormatImage(iconImage or "")
		icon.Parent = btn
		icon.ZIndex = 8
		local iconCorner = Instance.new("UICorner", icon)
		iconCorner.CornerRadius = UDim.new(1, 0)

		-- NOTE: Tab text label removed per request. Tabs now rely on icon-only navigation.

		-- active indicator (left vertical bar)
		local activeIndicator = Instance.new("Frame")
		activeIndicator.Size = UDim2.new(0, 6, 1, 0)
		activeIndicator.Position = UDim2.new(0, 0, 0, 0)
		activeIndicator.BackgroundColor3 = Accent
		activeIndicator.BorderSizePixel = 0
		activeIndicator.Visible = false
		activeIndicator.ZIndex = 9
		activeIndicator.Parent = holder
		local activeCorner = Instance.new("UICorner", activeIndicator)
		activeCorner.CornerRadius = UDim.new(0, 2)

		-- pulse the holder stroke for neon effect
		PlayNeonPulse(holderStroke, "Color", 1.6)

		return holder, btn, icon, nil, activeIndicator, holderStroke
	end

	-- Activate a tab by index
	local function activateTab(idx)
		if not idx then return end
		for i = 1, #tabs do
			local t = tabs[i]
			if t and t.ButtonHolder then
				local active = (i == idx)
				-- show/hide active indicator and page
				if t.ActiveIndicator then
					t.ActiveIndicator.Visible = active
				end
				if pages[i] then
					pages[i].Visible = active
				end
			end
		end
		activeIndex = idx
	end

	-- Public API for the created window
	local api = {}
	api.Window = Window
	api.ScreenGui = ScreenGui

	-- AddTab(titleOrConfig) -> returns tab object with :SetActive(), :AddSection()
	function api:AddTab(titleOrConfig)
		local title, iconId
		if type(titleOrConfig) == "table" then
			title = titleOrConfig.Title or "Tab"
			iconId = titleOrConfig.Icon
		else
			title = tostring(titleOrConfig or "Tab")
			iconId = nil
		end

		local order = #tabs + 1
		local holder, btn, btnIcon, label, activeIndicator = makeTabButton(title, iconId, order)

		-- create the page for this tab
		local page = Instance.new("Frame")
		page.Name = ("Page_%d"):format(order)
		page.Size = UDim2.new(1, 0, 1, 0)
		page.Position = UDim2.new(0, 0, 0, 0)
		page.BackgroundTransparency = 1
		page.Parent = Pages
		page.Visible = false

		-- create an inner content frame for layout within the page
		local pageContent = Instance.new("Frame")
		pageContent.Name = "Content"
		pageContent.Size = UDim2.new(1, -24, 1, -24)
		pageContent.Position = UDim2.new(0, 12, 0, 12)
		pageContent.BackgroundTransparency = 1
		pageContent.Parent = page

		local pageLayout = Instance.new("UIListLayout")
		pageLayout.Parent = pageContent
		pageLayout.SortOrder = Enum.SortOrder.LayoutOrder
		pageLayout.Padding = UDim.new(0, 16)

		-- store references
		tabs[order] = { ButtonHolder = holder, Button = btn, Icon = btnIcon, Label = label, ActiveIndicator = activeIndicator }
		pages[order] = page

		-- clicking the tab activates it
		btn.MouseButton1Click:Connect(function()
			activateTab(order)
		end)

		-- first tab auto-activate
		if order == 1 then
			activateTab(1)
		end

		-- tab object with colon-call friendly SetActive and AddSection
		local tabObj = {}
		tabObj.Button = btn
		tabObj.Page = page
		tabObj.Icon = btnIcon
		tabObj.Label = label

		-- expose the content container so buttons can be added directly to the tab
		tabObj.Container = pageContent

		function tabObj:SetActive()
			activateTab(order)
		end

		-- Adds a section to the tab page
		function tabObj:AddSection(sectionTitle)
			local section = {}
			-- holder frame for section (for spacing)
			local sectionFrame = Instance.new("Frame")
			sectionFrame.Size = UDim2.new(1, 0, 0, 80)
			sectionFrame.BackgroundTransparency = 1
			sectionFrame.LayoutOrder = #pageContent:GetChildren() + 1
			sectionFrame.Parent = pageContent

			-- Section Title (blue)
			local titleLabel = Instance.new("TextLabel")
			titleLabel.Size = UDim2.new(1, 0, 0, 24)
			titleLabel.Position = UDim2.fromOffset(0, 0)
			titleLabel.BackgroundTransparency = 1
			titleLabel.Text = tostring(sectionTitle or "SECTION")
			titleLabel.Font = Enum.Font.GothamBold
			titleLabel.TextSize = 18
			titleLabel.TextColor3 = Accent -- blue
			titleLabel.TextXAlignment = Enum.TextXAlignment.Left
			titleLabel.Parent = sectionFrame

			-- Container for section items (stacked)
			local itemsFrame = Instance.new("Frame")
			itemsFrame.Size = UDim2.new(1, 0, 0, 48)
			itemsFrame.Position = UDim2.new(0, 0, 0, 28)
			itemsFrame.BackgroundTransparency = 1
			itemsFrame.Parent = sectionFrame

			local itemsLayout = Instance.new("UIListLayout")
			itemsLayout.Parent = itemsFrame
			itemsLayout.SortOrder = Enum.SortOrder.LayoutOrder
			itemsLayout.Padding = UDim.new(0, 8)

			-- helper to add label inside section (now simplified: only a TextLabel)
			function section:AddLabel(text)
				local lbl = Instance.new("TextLabel")
				lbl.Size = UDim2.new(1, 0, 0, 24)
				lbl.BackgroundTransparency = 1
				lbl.Text = tostring(text or "")
				lbl.Font = Enum.Font.Gotham
				lbl.TextSize = 16
				lbl.TextColor3 = Color3.fromRGB(235, 235, 235) -- white
				lbl.TextXAlignment = Enum.TextXAlignment.Left
				lbl.LayoutOrder = #itemsFrame:GetChildren() + 1
				lbl.Parent = itemsFrame

				-- return a small API for the label
				local labelObj = {}
				labelObj.Frame = lbl
				labelObj.Label = lbl

				function labelObj:SetText(newText)
					lbl.Text = tostring(newText or "")
				end

				return labelObj
			end

			-- return section API
			section.Frame = sectionFrame
			section.Title = titleLabel
			section.Items = itemsFrame
			setmetatable(section, { __index = section })

			return section
		end

		-- AddButton as requested: creates a button using the provided style and callback.
		-- Parents the button to tabObj.Container (the page content frame).
		function tabObj:AddButton(config)
			config = config or {}
			local Title = config.Title or "Button"
			local Desc = config.Desc or ""
			local Callback = config.Callback or function() end

			local Button = Instance.new("TextButton")
			Button.Size = UDim2.new(1, -10, 0, 48)
			Button.BackgroundColor3 = Color3.fromRGB(30, 35, 45)
			Button.Text = ""
			Button.AutoButtonColor = false
			-- LayoutOrder is handled by the UIListLayout on the container; setting it relative to children count for determinism
			Button.LayoutOrder = #tabObj.Container:GetChildren() + 1
			Button.Parent = tabObj.Container

			local Stroke = Instance.new("UIStroke")
			Stroke.Color = Color3.fromRGB(39, 97, 195)
			Stroke.Parent = Button
			Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

			local TitleLabel = Instance.new("TextLabel")
			TitleLabel.Size = UDim2.new(1, -20, 0, 22)
			TitleLabel.Position = UDim2.fromOffset(10, 4)
			TitleLabel.BackgroundTransparency = 1
			TitleLabel.Text = Title
			TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
			TitleLabel.Font = Enum.Font.GothamBold
			TitleLabel.TextSize = 14
			TitleLabel.TextColor3 = Color3.fromRGB(230,230,230)
			TitleLabel.Parent = Button

			local DescLabel = Instance.new("TextLabel")
			DescLabel.Size = UDim2.new(1, -20, 0, 18)
			DescLabel.Position = UDim2.fromOffset(10, 26)
			DescLabel.BackgroundTransparency = 1
			DescLabel.Text = Desc
			DescLabel.TextXAlignment = Enum.TextXAlignment.Left
			DescLabel.Font = Enum.Font.Gotham
			DescLabel.TextSize = 11
			DescLabel.TextColor3 = Color3.fromRGB(160,160,160)
			DescLabel.Parent = Button

			Button.MouseButton1Click:Connect(function()
				-- spawn so the callback doesn't yield the UI
				task.spawn(Callback)
			end)

			return Button
		end

		return tabObj
	end

	-- expose simple controls
	function api:Show()
		Window.Visible = true
	end
	function api:Hide()
		Window.Visible = false
	end
	function api:Destroy()
		ScreenGui:Destroy()
	end

	return api
end

return KazeUI
